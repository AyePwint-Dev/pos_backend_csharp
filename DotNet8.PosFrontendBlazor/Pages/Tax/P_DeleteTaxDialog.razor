@using DotNet8.PosFrontendBlazor.Models.Tax

<MudDialog>
    <DialogContent>
        <MudText>Are you sure you want to delete?</MudText>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Error" Variant="MudBlazor.Variant.Filled" OnClick="DeleteAsync">Delete</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] MudDialogInstance? MudDialog { get; set; }

    [Parameter] public int id { get; set; }

    public async Task DeleteAsync()
    {
        if (id != 0)
        {
            var response = await HttpClientService.ExecuteAsync<TaxResponseModel>($"{Endpoints.Tax}/{id}", EnumHttpMethod.Delete);
            if (response.IsError)
            {
                InjectService.ShowMessage(response.Message, EnumResponseType.Error);
                return;
            }

            InjectService.ShowMessage(response.Message, EnumResponseType.Success);
            MudDialog?.Close();
        }
    }

    void Cancel() => MudDialog?.Cancel();
}